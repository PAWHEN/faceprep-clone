{"ast":null,"code":"import{useState,useEffect}from\"react\";import{db}from\"../firebase\";import{doc,setDoc,onSnapshot,getDoc,serverTimestamp}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialBoard=Array(9).fill(null);export default function XOGame(){const[board,setBoard]=useState(initialBoard);const[isX,setIsX]=useState(true);const[gameId,setGameId]=useState(\"global-xo\");const[status,setStatus]=useState(\"Waiting for player...\");const[player,setPlayer]=useState(\"\");const name=localStorage.getItem(\"name\");useEffect(()=>{setPlayer(Math.random()>0.5?\"X\":\"O\");const unsub=onSnapshot(doc(db,\"xo\",gameId),docSnap=>{if(docSnap.exists()){const data=docSnap.data();setBoard(data.board);setIsX(data.isX);setStatus(data.status);}});return()=>unsub();},[gameId]);const makeMove=async index=>{if(board[index]||isX&&player!==\"X\"||!isX&&player!==\"O\")return;const newBoard=[...board];newBoard[index]=isX?\"X\":\"O\";const winner=calculateWinner(newBoard);await setDoc(doc(db,\"xo\",gameId),{board:newBoard,isX:!isX,status:winner?\"\".concat(winner,\" wins!\"):\"Game in progress...\",updatedAt:serverTimestamp()});};const resetGame=async()=>{await setDoc(doc(db,\"xo\",gameId),{board:initialBoard,isX:true,status:\"New game started!\",updatedAt:serverTimestamp()});};const calculateWinner=b=>{const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const[a,b1,c]of lines){if(b[a]&&b[a]===b[b1]&&b[a]===b[c])return b[a];}return null;};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-100 via-yellow-100 to-pink-100 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto bg-white rounded-lg shadow-md p-6 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-purple-700 mb-2\",children:\"Tic-Tac-Toe Game\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4 text-gray-700\",children:[\"You are playing as: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:player})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-2 mx-auto w-48\",children:board.map((cell,i)=>/*#__PURE__*/_jsx(\"button\",{className:\"w-16 h-16 text-2xl font-bold bg-purple-200 hover:bg-purple-300 rounded\",onClick:()=>makeMove(i),children:cell},i))}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 font-semibold text-green-700\",children:status}),/*#__PURE__*/_jsx(\"button\",{onClick:resetGame,className:\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",children:\"Reset Game\"})]})});}","map":{"version":3,"names":["useState","useEffect","db","doc","setDoc","onSnapshot","getDoc","serverTimestamp","jsx","_jsx","jsxs","_jsxs","initialBoard","Array","fill","XOGame","board","setBoard","isX","setIsX","gameId","setGameId","status","setStatus","player","setPlayer","name","localStorage","getItem","Math","random","unsub","docSnap","exists","data","makeMove","index","newBoard","winner","calculateWinner","concat","updatedAt","resetGame","b","lines","a","b1","c","className","children","map","cell","i","onClick"],"sources":["C:/Users/hp/Downloads/faceprep-clone/src/pages/XOGame.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { db } from \"../firebase\";\nimport {\n  doc,\n  setDoc,\n  onSnapshot,\n  getDoc,\n  serverTimestamp\n} from \"firebase/firestore\";\n\nconst initialBoard = Array(9).fill(null);\n\nexport default function XOGame() {\n  const [board, setBoard] = useState(initialBoard);\n  const [isX, setIsX] = useState(true);\n  const [gameId, setGameId] = useState(\"global-xo\");\n  const [status, setStatus] = useState(\"Waiting for player...\");\n  const [player, setPlayer] = useState(\"\");\n  const name = localStorage.getItem(\"name\");\n\n  useEffect(() => {\n    setPlayer(Math.random() > 0.5 ? \"X\" : \"O\");\n    const unsub = onSnapshot(doc(db, \"xo\", gameId), (docSnap) => {\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        setBoard(data.board);\n        setIsX(data.isX);\n        setStatus(data.status);\n      }\n    });\n    return () => unsub();\n  }, [gameId]);\n\n  const makeMove = async (index) => {\n    if (board[index] || (isX && player !== \"X\") || (!isX && player !== \"O\")) return;\n\n    const newBoard = [...board];\n    newBoard[index] = isX ? \"X\" : \"O\";\n    const winner = calculateWinner(newBoard);\n\n    await setDoc(doc(db, \"xo\", gameId), {\n      board: newBoard,\n      isX: !isX,\n      status: winner ? `${winner} wins!` : \"Game in progress...\",\n      updatedAt: serverTimestamp()\n    });\n  };\n\n  const resetGame = async () => {\n    await setDoc(doc(db, \"xo\", gameId), {\n      board: initialBoard,\n      isX: true,\n      status: \"New game started!\",\n      updatedAt: serverTimestamp()\n    });\n  };\n\n  const calculateWinner = (b) => {\n    const lines = [\n      [0,1,2],[3,4,5],[6,7,8],\n      [0,3,6],[1,4,7],[2,5,8],\n      [0,4,8],[2,4,6]\n    ];\n    for (const [a,b1,c] of lines) {\n      if (b[a] && b[a] === b[b1] && b[a] === b[c]) return b[a];\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-100 via-yellow-100 to-pink-100 p-4\">\n      <div className=\"max-w-md mx-auto bg-white rounded-lg shadow-md p-6 text-center\">\n        <h1 className=\"text-2xl font-bold text-purple-700 mb-2\">Tic-Tac-Toe Game</h1>\n        <p className=\"mb-4 text-gray-700\">You are playing as: <span className=\"font-semibold\">{player}</span></p>\n        <div className=\"grid grid-cols-3 gap-2 mx-auto w-48\">\n          {board.map((cell, i) => (\n            <button\n              key={i}\n              className=\"w-16 h-16 text-2xl font-bold bg-purple-200 hover:bg-purple-300 rounded\"\n              onClick={() => makeMove(i)}\n            >\n              {cell}\n            </button>\n          ))}\n        </div>\n        <p className=\"mt-4 font-semibold text-green-700\">{status}</p>\n        <button\n          onClick={resetGame}\n          className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n        >\n          Reset Game\n        </button>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}